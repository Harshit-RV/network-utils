# Private Certificate Authority (CA) for SSH and SSL Certificates

This project provides a private Certificate Authority (CA) implementation for generating both SSH and SSL certificates. It allows you to issue certificates for SSH hosts and users, as well as root and client SSL certificates for secure communication.

## Installation


Deploy the resources by running:

   ```bash
   ./deploy-resources.sh
   ```

This creates the following resources on AWS:
- Secret to store the keys for signing certificates
- A role for the lambda function
- A policy to be attached to the role giving read/update access to created secret
- An openSSH layer to facilitate SSH operations
- The lambda function to act as a privateCA
  

## Usage

Certificates can be generated by running:

   ```bash
   ./get-certificate.sh
   ```

You can modify the variables in the script to change the payload:

- `CA_ACTION`
  - getHostSSHCert
  - getClientSSHCert
  - generateRootX509Cert
  - generateClientX509Cert
- `SSL_ATTRS_VALIDITY` - The validity of the generated certificate in days
- `SSL_CLIENT_PUBKEY_PEM` - Public Key of the client to be signed for generating client SSL certificate
- `SSH_ATTRS_VALIDITY` - The validity of the generated certificate in weeks
- `SSH_HOST_RSA_PUBKEY` - Public Key of the host to be signed for generating host SSH certificate
- `SSH_CLIENT_RSA_PUBKEY` - Public Key of the client to be signed for generating client SSH certificate