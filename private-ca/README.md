# Private Certificate Authority (CA) for SSH and SSL Certificates

This project provides a private Certificate Authority (CA) implementation for generating both SSH and SSL certificates. It allows you to issue certificates for SSH hosts and users, as well as root and client SSL certificates for secure communication.

## Installation


Deploy the resources by running:

   ```bash
   ./deploy-resources.sh
   ```

This creates the following resources on AWS:
- Secret to store the keys for signing certificates
- A role for the lambda function
- A policy to be attached to the role giving read/update access to created secret
- An openSSH layer to facilitate SSH operations
- The lambda function to act as a privateCA
  

## Usage

Certificates can be generated by running:

   ```bash
   ./get-certificate.sh
   ```

You can pass the following params to modify the payload:

- `CA_ACTION`
  - getHostSSHCert
  - getClientSSHCert
  - generateClientX509Cert
- `CERT_PUBKEY` - Public Key of the client to be signed for generating the certificate
- `CERT_VALIDITY` - Validity of the generated certificate in days
- `AWS_STS_REGION` - AWS region for generating sts token
- `AWS_SECRETS_REGION` - AWS region of the secret
- `CA_LAMBDA_FUNCTION_NAME` - Name of the CA lambda function